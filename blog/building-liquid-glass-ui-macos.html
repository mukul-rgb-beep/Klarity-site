<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How I Built Glassmorphism on macOS 14 While Apple Requires macOS 26 | Klarity Blog</title>
<meta name="description" content="Apple's Liquid Glass looks great, but .glassEffect() needs macOS 26. Here's how I built a complete glass design system for a shipping Mac app using only SwiftUI primitives available on macOS 14+.">
<meta name="keywords" content="klarity, clarity, liquid glass, glassmorphism, swiftui, macos app, nsvisualeffectview, swiftui glass effect, macos tahoe, indie mac app, apple design, dark mode swiftui, menubarextra, macos 14, backward compatible glass">
<meta name="author" content="Mukul Mehra">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://www.klaritydisk.com/blog/building-liquid-glass-ui-macos">
<meta property="og:type" content="article">
<meta property="og:title" content="How I Built Glassmorphism on macOS 14 While Apple Requires macOS 26">
<meta property="og:description" content="Apple's Liquid Glass needs macOS 26. Here's how I built a glass design system on macOS 14+ using only SwiftUI primitives.">
<meta property="og:url" content="https://www.klaritydisk.com/blog/building-liquid-glass-ui-macos">
<meta property="og:image" content="https://www.klaritydisk.com/og-image.png">
<meta property="og:site_name" content="Klarity">
<meta property="article:published_time" content="2026-02-15">
<meta property="article:author" content="Mukul Mehra">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="How I Built Glassmorphism on macOS 14 While Apple Requires macOS 26">
<meta name="twitter:image" content="https://www.klaritydisk.com/og-image.png">

<link rel="icon" type="image/png" sizes="32x32" href="/icon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/icon-16.png">

<script>
(function(){var t=localStorage.getItem('klarity-theme');if(t)document.documentElement.setAttribute('data-theme',t);})();
</script>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Manrope:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

<!-- JSON-LD structured data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How I Built Glassmorphism on macOS 14 While Apple Requires macOS 26",
  "description": "Apple's Liquid Glass needs macOS 26. Here's how I built a glass design system on macOS 14+ using only SwiftUI primitives.",
  "author": {
    "@type": "Person",
    "name": "Mukul Mehra"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Klarity"
  },
  "datePublished": "2026-02-15",
  "mainEntityOfPage": "https://www.klaritydisk.com/blog/building-liquid-glass-ui-macos",
  "keywords": ["liquid glass", "glassmorphism", "swiftui", "macos", "macos 14", "backward compatibility", "app development", "klarity", "clarity"]
}
</script>

<style>
:root {
  --teal: #3ECFCF; --teal-dim: #2a9e9e; --blue: #5B8DEF; --mint: #47E0B0;
  --lavender: #7BA4F7; --coral: #FF6B6B; --bg-deep: #060810;
  --bg-card: rgba(255,255,255,0.03); --bg-card-hover: rgba(255,255,255,0.06);
  --border: rgba(255,255,255,0.06); --border-hover: rgba(255,255,255,0.12);
  --text-primary: rgba(255,255,255,0.92); --text-secondary: rgba(255,255,255,0.55);
  --text-muted: rgba(255,255,255,0.3); --glass-bg: rgba(255,255,255,0.04);
  --glass-border: rgba(255,255,255,0.08); --nav-bg: rgba(6,8,16,0.7);
  --nav-bg-scrolled: rgba(6,8,16,0.92); --nav-mobile-bg: rgba(6,8,16,0.96);
  --font-display: 'Plus Jakarta Sans', sans-serif;
  --font-body: 'Manrope', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
}
[data-theme="light"] {
  --bg-deep: #f4f5f7; --bg-card: rgba(0,0,0,0.03); --bg-card-hover: rgba(0,0,0,0.06);
  --border: rgba(0,0,0,0.12); --border-hover: rgba(0,0,0,0.2);
  --text-primary: rgba(0,0,0,0.88); --text-secondary: rgba(0,0,0,0.58);
  --text-muted: rgba(0,0,0,0.38); --glass-bg: rgba(255,255,255,0.75);
  --glass-border: rgba(0,0,0,0.08); --teal: #147272; --teal-dim: #0f5c5c;
  --blue: #3a6ac9; --mint: #167a5e; --lavender: #5a7fd4; --coral: #d94545;
  --nav-bg: rgba(255,255,255,0.72); --nav-bg-scrolled: rgba(255,255,255,0.92);
  --nav-mobile-bg: rgba(255,255,255,0.96);
}
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior: smooth; }
body { font-family: var(--font-body); background: var(--bg-deep); color: var(--text-primary); overflow-x: hidden; -webkit-font-smoothing: antialiased; }
a { cursor: pointer; }

.ambient { position: fixed; inset: 0; z-index: 0; pointer-events: none; overflow: hidden; }
.ambient-orb { position: absolute; border-radius: 50%; filter: blur(120px); opacity: 0.10; animation: orbFloat 20s ease-in-out infinite alternate; }
.ambient-orb:nth-child(1) { width: 500px; height: 500px; background: var(--teal); top: -10%; left: -10%; }
.ambient-orb:nth-child(2) { width: 400px; height: 400px; background: var(--blue); top: 50%; right: -15%; animation-delay: -7s; }
@keyframes orbFloat { 0% { transform: translate(0,0) scale(1); } 50% { transform: translate(30px,-20px) scale(1.03); } 100% { transform: translate(-15px,10px) scale(0.97); } }

nav { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; padding: 0 48px; height: 72px; display: flex; align-items: center; justify-content: space-between; backdrop-filter: blur(20px) saturate(1.4); -webkit-backdrop-filter: blur(20px) saturate(1.4); background: var(--nav-bg); border-bottom: 1px solid var(--border); transition: background 0.3s, box-shadow 0.3s; }
nav.scrolled { background: var(--nav-bg-scrolled); box-shadow: 0 4px 30px rgba(0,0,0,0.12); }
.nav-logo { display: flex; align-items: center; gap: 10px; text-decoration: none; font-family: var(--font-display); font-weight: 800; font-size: 1.2rem; color: var(--text-primary); letter-spacing: -0.02em; }
.nav-logo svg { flex-shrink: 0; }
.nav-links { display: flex; align-items: center; gap: 32px; list-style: none; }
.nav-links a { text-decoration: none; font-size: 0.88rem; font-weight: 500; color: var(--text-secondary); transition: color 0.2s; position: relative; }
.nav-links a::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 1.5px; background: var(--teal); transition: width 0.3s var(--ease-out-expo); }
.nav-links a:hover { color: var(--text-primary); }
.nav-links a:hover::after { width: 100%; }
.nav-links a.active { color: var(--teal); }
.nav-links a.active::after { width: 100%; }
.nav-cta { background: linear-gradient(135deg, var(--teal), var(--blue)); color: #fff !important; padding: 8px 20px; border-radius: 100px; font-weight: 600 !important; font-size: 0.85rem !important; transition: transform 0.2s var(--ease-out-expo), box-shadow 0.2s !important; box-shadow: 0 2px 16px rgba(62,207,207,0.2); }
.nav-cta::after { display: none !important; }
.nav-cta:hover { transform: translateY(-1px) !important; box-shadow: 0 4px 24px rgba(62,207,207,0.35) !important; }
[data-theme="light"] .nav-cta { color: #fff !important; }
.theme-toggle { width: 36px; height: 36px; border-radius: 50%; border: 1px solid var(--border); background: var(--bg-card); display: flex; align-items: center; justify-content: center; font-size: 1rem; cursor: pointer; transition: background 0.2s, border-color 0.2s; }
.theme-toggle:hover { background: var(--bg-card-hover); border-color: var(--border-hover); }
.nav-hamburger { display: none; flex-direction: column; gap: 5px; background: none; border: none; padding: 8px; cursor: pointer; }
.nav-hamburger span { width: 22px; height: 2px; background: var(--text-primary); border-radius: 2px; transition: 0.3s; }
@media (max-width: 768px) {
  nav { padding: 0 20px; }
  .nav-hamburger { display: flex; }
  .nav-links { position: fixed; top: 72px; left: 0; right: 0; background: var(--nav-mobile-bg); backdrop-filter: blur(20px); flex-direction: column; padding: 32px 20px; gap: 20px; border-bottom: 1px solid var(--border); transform: translateY(-120%); transition: transform 0.4s var(--ease-out-expo); }
  .nav-links.open { transform: translateY(0); }
}

.article-page { position: relative; z-index: 2; min-height: 100vh; padding-top: 72px; }
.article-header { max-width: 720px; margin: 0 auto; padding: 80px 24px 40px; }
.article-back { display: inline-flex; align-items: center; gap: 6px; font-size: 0.85rem; font-weight: 500; color: var(--teal); text-decoration: none; margin-bottom: 32px; transition: gap 0.3s var(--ease-out-expo); }
.article-back:hover { gap: 10px; }
.article-meta { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
.article-tag { font-family: var(--font-mono); font-size: 0.72rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; color: var(--teal); background: rgba(62,207,207,0.08); padding: 4px 10px; border-radius: 6px; border: 1px solid rgba(62,207,207,0.15); }
[data-theme="light"] .article-tag { background: rgba(20,114,114,0.08); border-color: rgba(20,114,114,0.15); }
.article-date { font-size: 0.82rem; color: var(--text-muted); font-family: var(--font-mono); }
.article-header h1 { font-family: var(--font-display); font-size: clamp(1.8rem, 4.5vw, 2.6rem); font-weight: 800; letter-spacing: -0.03em; line-height: 1.2; margin-bottom: 16px; }
.article-subtitle { font-size: 1.15rem; color: var(--text-secondary); line-height: 1.65; }
.article-divider { max-width: 720px; margin: 0 auto; padding: 0 24px; }
.article-divider hr { border: none; height: 1px; background: var(--border); }

.article-body { max-width: 720px; margin: 0 auto; padding: 40px 24px 80px; }
.article-body h2 { font-family: var(--font-display); font-size: 1.5rem; font-weight: 700; letter-spacing: -0.02em; margin: 48px 0 16px; color: var(--text-primary); }
.article-body h2:first-child { margin-top: 0; }
.article-body p { font-size: 1.02rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: 20px; }
.article-body strong { color: var(--text-primary); font-weight: 600; }
.article-body a { color: var(--teal); text-decoration: underline; text-underline-offset: 3px; transition: opacity 0.2s; }
.article-body a:hover { opacity: 0.8; }
.article-body blockquote { border-left: 3px solid var(--teal); padding: 16px 24px; margin: 28px 0; background: var(--glass-bg); border-radius: 0 12px 12px 0; }
.article-body blockquote p { color: var(--text-primary); font-style: italic; margin-bottom: 0; }
.article-body ul, .article-body ol { padding-left: 24px; margin-bottom: 20px; }
.article-body li { font-size: 1.02rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: 8px; }
.article-body code { font-family: var(--font-mono); font-size: 0.88rem; background: var(--glass-bg); border: 1px solid var(--glass-border); padding: 2px 7px; border-radius: 5px; color: var(--teal); }
.article-body pre { background: rgba(0,0,0,0.35); border: 1px solid var(--glass-border); border-radius: 12px; padding: 20px 24px; margin: 24px 0; overflow-x: auto; }
[data-theme="light"] .article-body pre { background: rgba(0,0,0,0.04); }
.article-body pre code { background: none; border: none; padding: 0; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.7; }
.callout { background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; padding: 24px; margin: 32px 0; }
.callout-title { font-family: var(--font-display); font-weight: 700; font-size: 0.9rem; color: var(--teal); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.04em; }

.article-cta { max-width: 720px; margin: 0 auto 80px; padding: 0 24px; }
.article-cta-inner { background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 16px; padding: 40px; text-align: center; backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
.article-cta-inner h3 { font-family: var(--font-display); font-size: 1.4rem; font-weight: 700; margin-bottom: 10px; }
.article-cta-inner p { font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 24px; }
.cta-button { display: inline-block; background: linear-gradient(135deg, var(--teal), var(--blue)); color: #fff; padding: 12px 32px; border-radius: 100px; font-weight: 600; font-size: 0.95rem; text-decoration: none; transition: transform 0.2s var(--ease-out-expo), box-shadow 0.2s; box-shadow: 0 2px 16px rgba(62,207,207,0.2); }
.cta-button:hover { transform: translateY(-2px); box-shadow: 0 4px 24px rgba(62,207,207,0.35); color: #fff; }

footer { position: relative; z-index: 2; padding: 48px 24px 32px; border-top: 1px solid var(--border); }
.footer-inner { max-width: 1120px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
.footer-links { display: flex; gap: 24px; list-style: none; }
.footer-links a { font-size: 0.82rem; color: var(--text-muted); text-decoration: none; transition: color 0.2s; }
.footer-links a:hover { color: var(--text-primary); }
.footer-copy { font-size: 0.78rem; color: var(--text-muted); }

@media (max-width: 600px) {
  .article-header { padding: 60px 20px 32px; }
  .article-body { padding: 32px 20px 60px; }
  .article-cta { padding: 0 20px; }
  .article-cta-inner { padding: 28px 20px; }
}
</style>
</head>
<body>

<!-- Ambient Background -->
<div class="ambient">
  <div class="ambient-orb"></div>
  <div class="ambient-orb"></div>
</div>

<!-- Navigation -->
<nav id="mainNav">
  <a href="/" class="nav-logo">
    <svg width="28" height="28" viewBox="0 0 120 120" fill="none">
      <rect x="8" y="8" width="50" height="48" rx="5" fill="#3ECFCF"/>
      <rect x="62" y="8" width="50" height="26" rx="5" fill="#5B8DEF"/>
      <rect x="62" y="38" width="50" height="18" rx="5" fill="#47E0B0"/>
      <rect x="8" y="60" width="30" height="52" rx="5" fill="#5B8DEF"/>
      <rect x="42" y="60" width="24" height="52" rx="5" fill="#3ECFCF"/>
      <rect x="70" y="60" width="42" height="28" rx="5" fill="#7BA4F7"/>
      <rect x="70" y="92" width="42" height="20" rx="5" fill="#3ECFCF"/>
    </svg>
    Klarity
  </a>
  <button class="nav-hamburger" id="navHamburger" aria-label="Menu">
    <span></span><span></span><span></span>
  </button>
  <ul class="nav-links" id="navLinks">
    <li><a href="/#features">Features</a></li>
    <li><a href="/#whats-new">What's New</a></li>
    <li><a href="/#showcase">How It Works</a></li>
    <li><a href="/#compare">Compare</a></li>
    <li><a href="/#reviews">Reviews</a></li>
    <li><a href="/blog/" class="active">Blog</a></li>
    <li><button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">üåô</button></li>
    <li><a href="https://apps.apple.com/in/app/klarity-disk/id6758895498?mt=12" class="nav-cta">Download</a></li>
  </ul>
</nav>

<!-- Article -->
<main class="article-page">
  <div class="article-header">
    <a href="/blog/" class="article-back"><span>‚Üê</span> Back to Blog</a>
    <div class="article-meta">
      <span class="article-tag">Dev</span>
      <span class="article-date">February 15, 2026</span>
    </div>
    <h1>How I Built Glassmorphism on macOS 14 While Apple Requires macOS 26</h1>
    <p class="article-subtitle">Apple's Liquid Glass is beautiful, but <code>.glassEffect()</code> requires macOS Tahoe. If your app supports macOS 14+, you're on your own. Here's what it takes to build a glass design system from scratch in SwiftUI.</p>
  </div>

  <div class="article-divider"><hr></div>

  <div class="article-body">

    <h2>The backward compatibility problem</h2>

    <p>When Apple announced <strong>Liquid Glass</strong> at WWDC 2025, it felt like validation. Glassmorphism (translucent panels, frosted backgrounds, light-reactive borders) had gone from a design trend to Apple's official design language overnight. For developers starting fresh on macOS 26, the new <code>.glassEffect()</code> modifier makes glass trivial. One line of SwiftUI and you're done.</p>

    <p>But here's the reality most indie developers face: you can't require macOS 26. Not yet. Your users are on Sonoma, maybe Sequoia. If you set your deployment target to macOS 26 only, you're cutting off a huge chunk of your audience. So if you want your app to look and feel like it belongs in the Liquid Glass era while still running on macOS 14, you have to build the glass yourself.</p>

    <p>That's what I did with <a href="https://apps.apple.com/in/app/klarity-disk/id6758895498?mt=12">Klarity</a>, a disk analyzer I built with treemap and icicle visualizations. Every card, every panel, every interactive element uses translucent surfaces with gradient borders and depth shadows. All of it runs on macOS 14+, without a single Liquid Glass API call.</p>

    <p>This post covers the real challenges I hit building that system. I won't walk through my exact implementation (that's my competitive edge), but I'll share the problems, the tradeoffs, and the things I wish someone had written down before I started.</p>

    <h2>What you have to work with on macOS 14</h2>

    <p>Without <code>.glassEffect()</code>, here's your toolkit for building glass-like surfaces in SwiftUI:</p>

    <ul>
      <li><code>.ultraThinMaterial</code> and friends. Apple's built-in vibrancy materials. They blur whatever is behind the <em>window</em>, which is great for sidebars and toolbars but not for in-app glass cards.</li>
      <li><code>NSVisualEffectView</code>. The AppKit workhorse that powers system vibrancy. You can bridge it into SwiftUI, but it's designed for system chrome, not custom glass surfaces.</li>
      <li>SwiftUI's drawing primitives: <code>RoundedRectangle</code>, <code>LinearGradient</code>, <code>.fill()</code>, <code>.strokeBorder()</code>, <code>.shadow()</code>, <code>.opacity()</code>. This is what you'll end up using.</li>
    </ul>

    <p>The key realisation is that convincing glass on macOS 14 isn't about blur. The built-in materials blur the desktop wallpaper behind your window, but within your app's content area, there's nothing to blur against. What you need instead is a <strong>layered composition</strong> of semi-transparent fills, gradient stroke borders, and carefully tuned shadows that create the <em>illusion</em> of a translucent material.</p>

    <h2>Edges matter more than surfaces</h2>

    <p>This was the single most important thing I learned. When I started, I spent days trying to get the <em>surface</em> of my glass cards right, tweaking fill opacity, experimenting with background blur, layering materials. The cards still looked flat.</p>

    <p>The breakthrough came when I shifted my attention to the <strong>edges</strong>. A carefully crafted border that simulates how light catches the rim of a glass surface did more for the illusion than any amount of surface tweaking. Human eyes judge material properties by how light interacts at boundaries, not across surfaces. Once I started thinking about borders as the primary carrier of the glass effect, everything clicked.</p>

    <p>Apple's Liquid Glass does this for you. It simulates light refraction and specular highlights using real-time rendering. On macOS 14, you fake it with SwiftUI's drawing primitives. The result isn't physically accurate, but it's visually convincing at UI scale.</p>

    <blockquote>
      <p>If your glass cards look flat, stop tweaking the fill. Spend that time on the border instead. A thin gradient stroke that transitions from a brighter edge to a subtler one will do more than any background opacity change.</p>
    </blockquote>

    <h2>The dark mode trap (and the App Store rejection)</h2>

    <p>My glass design system was built dark-first. The translucent panels, the subtle borders, the ambient glow effects: they all look their best against a dark background. I had a light mode that technically worked, but it required a completely different set of opacity values, border colours, and shadow intensities for every single glass component.</p>

    <p>When I submitted Klarity to the Mac App Store, it was rejected. The reason: light mode inconsistencies. My light mode wasn't broken, but it was inconsistent enough in certain edge cases that the reviewer flagged it.</p>

    <p>I had a decision to make: spend two or three more weeks perfecting every glass component in light mode, or force dark mode app-wide and ship. I chose to ship.</p>

    <p>In SwiftUI, you'd think <code>.preferredColorScheme(.dark)</code> on your root view would handle this. It does, for the window content. But if your app includes a <code>MenuBarExtra</code> (the menu bar popover), it has its own scene and completely ignores the parent window's colour scheme modifier. You need to apply the modifier at the <strong>scene level</strong>, not the view level, separately on both the <code>WindowGroup</code> and the <code>MenuBarExtra</code>.</p>

    <div class="callout">
      <div class="callout-title">Gotcha</div>
      <p>In a macOS app with a <code>MenuBarExtra</code>, <code>.preferredColorScheme(.dark)</code> does not cascade between scenes. You must set it independently on every scene: the main window <em>and</em> the menu bar popover. Otherwise, your menu bar widget shows up in light mode even while your main window is locked to dark.</p>
    </div>

    <p>The practical takeaway for indie developers: if your glass UI is designed dark-first and you're working alone, shipping dark-only for v1 is completely reasonable. Perfecting dual-mode glass means designing two separate visual systems. Apple's Liquid Glass handles light/dark adaptation on its own because it's a system material backed by a full engineering team. Your hand-rolled glass doesn't get that for free.</p>

    <h2>Shadows that don't turn your UI into mud</h2>

    <p>Depth is what separates glass that feels like glass from glass that feels like a vaguely transparent box. And depth on macOS comes down to shadows.</p>

    <p>A mistake I made early on (and I think most developers make) was using shadows that were too large and too dark. A glass card with a 20-pixel blur and 0.4 opacity shadow looks fine by itself. Put ten of them in a grid and your entire interface drowns in grey.</p>

    <p>What works is restraint. Smaller blur radii than you think. Much lower opacity than looks right on a single element. A slight Y-offset to simulate overhead light. And shadow values need to differ between colour schemes: in dark mode, shadows should be darker and tighter (because soft shadows vanish against a dark background), while in light mode they can be softer and more diffuse.</p>

    <p>The other thing that helped was using <strong>more than one visual cue</strong> for depth. Relying on a single shadow to communicate "this element is floating" never quite worked. The result always looked either too heavy or invisible. Combining multiple subtle depth cues (not all shadows, necessarily) created a much more convincing sense of layering. One depth cue alone looks flat; multiple lightweight cues compound into something convincing.</p>

    <h2>Performance with animated glass</h2>

    <p>Every glass component in Klarity has some animation: hover glow, selection highlight, drill-down transitions. When your entire UI is composed of these animated glass elements, you're asking SwiftUI to re-render a lot of layers every frame. On a MacBook Air, this matters.</p>

    <p>Three things that made the biggest performance difference:</p>

    <ul>
      <li><strong>Use <code>.easeOut</code> instead of <code>.spring()</code> for hover.</strong> Interactive springs look great for taps, but for hover they add unnecessary oscillation that extends the animation and keeps the renderer busy. A short <code>.easeOut</code> in the 0.1‚Äì0.2 second range feels snappier and costs less.</li>
      <li><strong>Avoid animating shadow parameters directly.</strong> Changing <code>.shadow()</code> radius or offset values forces the compositor to recalculate the shadow bitmap every frame. Find ways to keep expensive visual effects static and animate cheaper properties instead. SwiftUI can composite simple property changes much faster than re-rendering shadow geometry.</li>
      <li><strong>Be careful with <code>.drawingGroup()</code>.</strong> It flattens a view tree into a single Metal-rendered layer, which helps for complex visual composites. But it also kills hit testing inside that group, breaking hover and click interactions. Use it on decorative elements only, never on interactive glass cards.</li>
    </ul>

    <h2>Swift concurrency and the MainActor</h2>

    <p>This isn't specific to glass, but it will bite you if you're building a Mac app with a data-heavy backend (file scanning, image processing, anything CPU-intensive) alongside a rich animated frontend.</p>

    <p>The issue: anything that drives a SwiftUI view must update on the <code>MainActor</code>. Your heavy computation needs to run off the main thread. The moment you mix <code>@MainActor</code>-isolated classes with detached tasks that touch the same state, Xcode throws concurrency warnings, or worse, it compiles fine and crashes at runtime.</p>

    <p>My approach was to make shared app state explicitly <code>@MainActor</code>-isolated and have all background work communicate through async methods that hop back to the main actor before writing. It sounds obvious in retrospect, but Swift's concurrency documentation doesn't spell out this pattern clearly for macOS apps, especially apps that were started before strict concurrency checking became the default.</p>

    <h2>Will I adopt Liquid Glass APIs?</h2>

    <p>Eventually, yes. The plan is to adopt <code>.glassEffect()</code> for users running macOS 26 while keeping the custom glass fallback for macOS 14 and 15 users. This means a conditional check at runtime: if the Liquid Glass APIs are available, use them; otherwise, fall back to the hand-rolled system.</p>

    <p>There are reasons to keep the custom system even after Tahoe becomes widespread:</p>

    <ul>
      <li><strong>Brand identity.</strong> System glass makes every app look the same. Custom glass lets you have a visual signature: unique colour tints, specific border treatments, bespoke interaction patterns.</li>
      <li><strong>Fine control.</strong> System glass adapts automatically, which is usually great but sometimes does things you'd rather it didn't. A custom system gives you exact control over every value.</li>
      <li><strong>Backward compatibility.</strong> As long as Klarity supports macOS 14+, the custom glass needs to exist anyway. It's not throwaway work.</li>
    </ul>

    <h2>What I'd tell a developer starting today</h2>

    <p>If you're about to build a glass-style macOS app and you need to support anything older than Tahoe, here's what I wish someone had told me:</p>

    <p><strong>Start dark-only.</strong> Light mode glass is twice the work. Ship dark first, add light mode when you have demand and bandwidth. Force it at the scene level if you have a <code>MenuBarExtra</code>.</p>

    <p><strong>Focus on borders, not surfaces.</strong> A gradient stroke that simulates light catching the edge creates a more convincing glass effect than any amount of background blur or fill tweaking.</p>

    <p><strong>Layer your depth cues.</strong> A single shadow isn't enough. Combine multiple subtle visual cues for depth. One cue alone always looks flat.</p>

    <p><strong>Keep expensive effects static.</strong> Animate cheap properties, not shadow geometry. Your GPU will thank you.</p>

    <p><strong>Test with Reduce Transparency enabled.</strong> Go to System Settings ‚Üí Accessibility ‚Üí Display and turn on "Reduce transparency." If your app becomes unusable, your glass is carrying too much of the visual weight. The underlying layout needs to work without translucency.</p>

    <p><strong>Budget time for App Store review.</strong> Reviewers test light mode even if your app is dark-only. Either force dark mode explicitly and correctly (scene level, not just view level), or make sure your light mode is complete.</p>

    <p>Building a glass UI on macOS without Apple's APIs was one of the most rewarding design challenges I've worked on. It forced me to understand how the illusion of translucency works at the pixel level: which edges catch light, which shadows create depth, which animation timings feel physical versus mechanical. That knowledge doesn't go away just because <code>.glassEffect()</code> exists. If anything, it makes you a better judge of when to use the system material and when to go custom.</p>

    <div class="callout">
      <div class="callout-title">Try Klarity</div>
      <p>Klarity is the Mac disk analyzer I built with this glass design system. Treemap and icicle visualizations, a live RAM monitor, and theme packs. $6.99 one-time on the <a href="https://apps.apple.com/in/app/klarity-disk/id6758895498?mt=12">Mac App Store</a>. Runs on macOS 14+.</p>
    </div>

    <p>If you're working through similar challenges in your own macOS app, I'd love to hear about it. And if you try Klarity, a quick review on the App Store makes a huge difference for a solo developer.</p>

    <p>‚Äî Mukul</p>

  </div>

  <div class="article-cta">
    <div class="article-cta-inner">
      <h3>See your disk. Clearly.</h3>
      <p>$6.99 one-time ¬∑ macOS 14+ ¬∑ Apple Silicon & Intel</p>
      <a href="https://apps.apple.com/in/app/klarity-disk/id6758895498?mt=12" class="cta-button">Download on Mac App Store</a>
    </div>
  </div>

  <div class="article-cta" style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 16px; padding: 2rem; margin: 3rem auto; max-width: 720px;">
    <h3 style="font-size: 1.2rem; margin-bottom: 1rem; color: var(--teal, #3ECFCF);">More from the Klarity Blog</h3>
    <ul style="list-style: none; padding: 0; display: flex; flex-direction: column; gap: 1rem;">
      <li><a href="/blog/treemap-icicle-vs-sunburst" style="color: var(--lavender, #7BA4F7); text-decoration: none;">Treemap vs Sunburst: Why Klarity over DaisyDisk ‚Üí</a></li>
      <li><a href="/blog/why-i-built-klarity" style="color: var(--lavender, #7BA4F7); text-decoration: none;">Why I Built Klarity ‚Äî A DaisyDisk Alternative for $6.99 ‚Üí</a></li>
    </ul>
  </div>
</main>

<footer>
  <div class="footer-inner">
    <span class="footer-copy">¬© 2025‚Äì2026 Mukul Mehra. All rights reserved.</span>
    <ul class="footer-links">
      <li><a href="/privacy">Privacy Policy</a></li>
      <li><a href="/terms">Terms of Use</a></li>
      <li><a href="/support">Support</a></li>
      <li><a href="/blog/">Blog</a></li>
    </ul>
  </div>
</footer>

<script>
const nav = document.getElementById('mainNav');
window.addEventListener('scroll', () => { nav.classList.toggle('scrolled', window.scrollY > 20); });
const hamburger = document.getElementById('navHamburger');
const navLinks = document.getElementById('navLinks');
hamburger.addEventListener('click', () => { navLinks.classList.toggle('open'); });
const themeToggle = document.getElementById('themeToggle');
themeToggle.addEventListener('click', () => {
  const html = document.documentElement;
  const current = html.getAttribute('data-theme');
  const next = current === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', next);
  localStorage.setItem('klarity-theme', next);
  themeToggle.textContent = next === 'dark' ? 'üåô' : '‚òÄÔ∏è';
});
if (document.documentElement.getAttribute('data-theme') === 'light') themeToggle.textContent = '‚òÄÔ∏è';
</script>
</body>
</html>
